{"version":3,"file":"split-view.js","sourceRoot":"","sources":["../../src/split-view/split-view.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, {\n  createContext,\n  forwardRef,\n  isValidElement,\n  use,\n  type ReactElement,\n  type ReactNode,\n} from 'react';\nimport { Platform } from 'react-native';\nimport { Split, type SplitHostProps } from 'react-native-screens/experimental';\n\nimport { SplitViewColumn, SplitViewInspector } from './elements';\nimport { SplitViewStack } from './split-view-stack';\nimport { IsWithinLayoutContext } from '../layouts/IsWithinLayoutContext';\nimport { Slot } from '../views/Navigator';\n\nexport type { SplitViewRef } from './split-view-stack';\n\nconst IsWithinSplitViewContext = createContext(false);\n\n/**\n * For full list of supported props, see [`SplitHostProps`](http://github.com/software-mansion/react-native-screens/blob/main/src/components/gamma/split/SplitHost.types.ts#L117)\n */\nexport interface SplitViewProps extends Omit<SplitHostProps, 'children'> {\n  children?: ReactNode;\n}\n\nconst SplitViewNavigator = forwardRef<import('./split-view-stack').SplitViewRef, SplitViewProps>(\n  function SplitViewNavigator({ children, ...splitViewHostProps }, ref) {\n    if (use(IsWithinSplitViewContext)) {\n      throw new Error('There can only be one SplitView in the navigation hierarchy.');\n    }\n\n    // TODO: Add better way of detecting if SplitView is rendered inside Native navigator.\n    if (use(IsWithinLayoutContext)) {\n      throw new Error('SplitView cannot be used inside another navigator, except for Slot.');\n    }\n\n    if (process.env.EXPO_OS !== 'ios') {\n      console.warn(\n        'SplitView is only supported on iOS. The SplitView will behave like a Slot navigator on other platforms.'\n      );\n      return <Slot />;\n    }\n\n    const allChildrenArray = React.Children.toArray(children);\n    const columnChildren = allChildrenArray.filter(\n      (child) => isValidElement(child) && child.type === SplitViewColumn\n    ) as ReactElement<import('./elements').SplitViewColumnProps>[];\n    const inspectorChildren = allChildrenArray.filter(\n      (child) => isValidElement(child) && child.type === SplitViewInspector\n    );\n    const numberOfSidebars = columnChildren.length;\n    const numberOfInspectors = inspectorChildren.length;\n\n    if (allChildrenArray.length !== columnChildren.length + inspectorChildren.length) {\n      console.warn(\n        'Only SplitView.Column and SplitView.Inspector components are allowed as direct children of SplitView.'\n      );\n    }\n\n    if (numberOfSidebars > 2) {\n      throw new Error('There can only be two SplitView.Column in the SplitView.');\n    }\n\n    if (numberOfSidebars + numberOfInspectors === 0) {\n      console.warn('No SplitView.Column and SplitView.Inspector found in SplitView.');\n      return <Slot />;\n    }\n\n    // On iPhone, render a ScreenStack instead of Split.Host\n    if (!(Platform.OS === 'ios' && Platform.isPad)) {\n      if (numberOfInspectors > 0) {\n        console.warn('SplitView.Inspector is not supported on iPhone and will be ignored.');\n      }\n      return <SplitViewStack key={numberOfSidebars} ref={ref} columnChildren={columnChildren} />;\n    }\n\n    const WrappedSlot = () => (\n      <IsWithinLayoutContext value>\n        <Slot />\n      </IsWithinLayoutContext>\n    );\n\n    // The key is needed, because number of columns cannot be changed dynamically\n    return (\n      <Split.Host key={numberOfSidebars + numberOfInspectors} {...splitViewHostProps}>\n        {columnChildren}\n        <Split.Column>\n          <WrappedSlot />\n        </Split.Column>\n        {inspectorChildren}\n      </Split.Host>\n    );\n  }\n);\n\nexport const SplitView = Object.assign(SplitViewNavigator, {\n  Column: SplitViewColumn,\n  Inspector: SplitViewInspector,\n});\n"]}